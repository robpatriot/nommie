{
  "name": "nommie",
  "packageManager": "pnpm@10.26.1+sha512.664074abc367d2c9324fdc18037097ce0a8f126034160f709928e9e9f95d98714347044e5c3164d65bd5da6c59c6be362b107546292a8eecb7999196e5ce58fa",
  "version": "1.1.0",
  "description": "Web-based multiplayer version of Nomination Whist",
  "scripts": {
    "lint": "pnpm fe:lint && pnpm be:lint",
    "format": "pnpm fe:format && pnpm be:format",
    "build": "pnpm fe:build && pnpm be:build",
    "dev": "pnpm be:dev & pnpm fe:dev",
    "start": "pnpm be:start & pnpm fe:build && pnpm fe:start",
    "stop": "pnpm be:down && pnpm fe:down",
    "test": "pnpm be:test && pnpm fe:test",
    "test:v": "pnpm be:test:v && pnpm fe:test",
    "test:q": "pnpm be:test:q && pnpm --silent fe:test",
    "test:ci": "pnpm be:test:q && pnpm fe:test:cov",
    "be:dev": "if [ -f .dev/be.pid ] && kill -0 $(cat .dev/be.pid) 2>/dev/null; then exit 1; fi; if lsof -ti :3001 >/dev/null 2>&1; then echo 'Port 3001 is already in use.'; exit 1; fi; cargo watch -x 'run --manifest-path apps/backend/Cargo.toml' >> .dev/dev.log 2>&1 & echo $! > .dev/be.pid",
    "be:start": "if [ -f .dev/be.pid ] && kill -0 $(cat .dev/be.pid) 2>/dev/null; then exit 1; fi; if lsof -ti :3001 >/dev/null 2>&1; then echo 'Port 3001 is already in use.'; exit 1; fi; cargo run --release --manifest-path apps/backend/Cargo.toml >> .dev/dev.log 2>&1 & echo $! > .dev/be.pid",
    "be:down": "if [ -f .dev/be.pid ]; then kill $(cat .dev/be.pid) 2>/dev/null || true; rm -f .dev/be.pid; fi",
    "be:build": "cargo build --manifest-path apps/backend/Cargo.toml",
    "be:lint": "cargo clippy --manifest-path apps/backend/Cargo.toml --all-targets --all-features -- -D warnings",
    "be:format": "cargo +nightly fmt --manifest-path apps/backend/Cargo.toml --all",
    "be:test": "cargo nextest run --manifest-path apps/backend/Cargo.toml",
    "be:test:v": "TEST_LOG=info cargo nextest run --manifest-path apps/backend/Cargo.toml -v --success-output=immediate",
    "be:test:q": "cargo nextest run --manifest-path apps/backend/Cargo.toml --failure-output=final --hide-progress-bar --status-level=none --final-status-level=fail",
    "be:test:full": "cargo nextest run --manifest-path apps/backend/Cargo.toml -- --include-ignored",
    "fe:dev": "if [ -f .dev/fe.pid ] && kill -0 $(cat .dev/fe.pid) 2>/dev/null; then exit 1; fi; if lsof -ti :3000 >/dev/null 2>&1; then echo 'Port 3000 is already in use.'; exit 1; fi; pnpm --filter @nommie/frontend exec sh -lc 'exec next dev >> ../../.dev/dev.log 2>&1' & echo $! > .dev/fe.pid",
    "fe:down": "if [ -f .dev/fe.pid ]; then kill $(cat .dev/fe.pid) 2>/dev/null || true; rm -f .dev/fe.pid; fi",
    "fe:build": "pnpm --filter @nommie/frontend build",
    "fe:start": "if [ -f .dev/fe.pid ] && kill -0 $(cat .dev/fe.pid) 2>/dev/null; then exit 1; fi; if lsof -ti :3000 >/dev/null 2>&1; then echo 'Port 3000 is already in use.'; exit 1; fi; [ ! -d apps/frontend/.next ] && { echo 'Frontend not built. Run: pnpm fe:build'; exit 1; }; R=\"$(pwd)\"; mkdir -p \"$R/.dev\"; S=\"apps/frontend/.next/standalone/apps/frontend\"; [ ! -e \"$S/.next/static\" ] && { mkdir -p \"$S/.next\"; ln -sfn ../../../../../.next/static \"$S/.next/static\"; }; [ ! -e \"$S/public\" ] && { mkdir -p \"$S\"; ln -sfn ../../../../public \"$S/public\"; }; (cd \"$S/../..\" && node apps/frontend/server.js >> \"$R/.dev/dev.log\" 2>&1) & echo $! > \"$R/.dev/fe.pid\"",
    "fe:lint": "pnpm --filter @nommie/frontend lint",
    "fe:lint:fix": "pnpm --filter @nommie/frontend exec eslint . --fix",
    "fe:format": "pnpm --filter @nommie/frontend format",
    "fe:deadcode": "ts-prune --project apps/frontend/tsconfig.json",
    "fe:test": "pnpm --filter @nommie/frontend test",
    "fe:test:watch": "pnpm --filter @nommie/frontend test:watch",
    "fe:test:cov": "pnpm --filter @nommie/frontend test:cov",
    "db:svc:ready": "docker compose -f docker/dev-db/docker-compose.yml exec postgres pg_isready -U \"${POSTGRES_USER}\" -d \"${POSTGRES_DB}\""
  },
  "devDependencies": {
    "baseline-browser-mapping": "^2.9.19",
    "ts-prune": "^0.10.3",
    "typescript": "^5.9.3"
  }
}
